table:
  name: escrow_xdr_transactions
  schema: public

object_relationships:
  - name: escrow_transaction
    using:
      foreign_key_constraint_on: escrow_transaction_id

select_permissions:
  - role: anonymous
    permission:
      columns: []
      filter: {}
    comment: ""
  - role: tenant
    permission:
      columns:
        - id
        - escrow_transaction_id
        - xdr_type
        - status
        - signing_address
        - created_at
        - updated_at
      filter:
        escrow_transaction:
          bid_request:
            tenant_id:
              _eq: X-Hasura-User-Id
    comment: "Tenants can view limited details of their own XDR transactions"
  - role: landlord
    permission:
      columns:
        - id
        - escrow_transaction_id
        - xdr_type
        - status
        - signing_address
        - created_at
        - updated_at
      filter:
        escrow_transaction:
          bid_request:
            apartment:
              owner_id:
                _eq: X-Hasura-User-Id
    comment: "Landlords can view limited details of XDR transactions for their properties"